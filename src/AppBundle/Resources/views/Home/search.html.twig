{% extends "::base.html.twig" %}

{% block title %}Homepage - {{ parent() }}{% endblock %}

{% block body %}

    <div class="container offers">
        <div class="row">
            <div class="col-md-7 col-sm-8">
                <div class="row">

                    {% for offer in offers %}
                        <a href="{{ path('app.offerDetails', {'id': offer.getId}) }}">
                            <div class="col-xs-6 col-sm-6 col-md-6 offer" data-id="{{ offer.getId }}">
                                <div class="offer-inner">
                                    <img src="{{ asset('/images/'~offer.getImage) }}" class="img-responsive" alt="{{ offer.getName }}" />
                                    <div class="offer-content">
                                        <h2>{{ offer.getName }}</h2>
                                        <h5>{{ offer.getDescription|slice(0, 75) }}...</h5>
                                        <span class="offer-rating">5.0</span>
                                        <span class="offer-activity">{{ offer.getActivity.getName }}</span>

                                        <svg class="offer-location" width="14px" height="20px" viewBox="0 0 14 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                                                <path d="M7,0 C3.13383665,0 0,3.0828692 0,6.88540084 C0,10.68827 6.33390528,20 7,20 C7.66609472,20 14,10.68827 14,6.88540084 C14,3.0828692 10.8661633,0 7,0 L7,0 Z M7,9.87341772 C5.2947838,9.87341772 3.91146191,8.51274262 3.91146191,6.83544304 C3.91146191,5.15814346 5.2947838,3.79746835 7,3.79746835 C8.7052162,3.79746835 10.0885381,5.15814346 10.0885381,6.83544304 C10.0885381,8.51274262 8.7052162,9.87341772 7,9.87341772 L7,9.87341772 Z" id="Imported-Layers-Copy-5" fill="currentColor" sketch:type="MSShapeGroup"></path>
                                            </g>
                                        </svg>

                                        <span class="offer-price">{{ offer.getPrice }} € / Mėn</span>
                                    </div>
                                </div>
                            </div>
                        </a>



                        {% if loop.index is divisibleby(2) %}
                            <div class="clearfix hidden-sm hidden-xs"></div>
                        {% endif %}

                        {% if loop.index is divisibleby(2) %}
                            <div class="clearfix hidden-lg hidden-md"></div>
                        {% endif %}

                    {% endfor %}

                    <div class="clearfix"></div>

                </div>
            </div>
            <div class="col-md-5 col-sm-4">
                <div id="map" class="map"></div>
            </div>
        </div>
    </div>
    <script>
        var offers = {{ offers_json|raw }};
        var markers = [];
        var infowindow = [];
        var map;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 11,
                center: {lat: 54.8931048, lng: 23.8666335}
            });
            var green = 'http://maps.google.com/mapfiles/marker_green.png';

            for (var offer in offers) {
                markers[offer] = new google.maps.Marker({
                    position: {lat: offers[offer].latitude, lng: offers[offer].longitude},
                    map: map,
                    title: offers[offer].name,
                    icon: green,
                    id: offer
                });
            }

            setMapParameters(offers);
        }

    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB55WKt6k7UZLVfTeDFi1DV9EQjcsAmwKA&callback=initMap" async defer></script>

{% endblock %}
